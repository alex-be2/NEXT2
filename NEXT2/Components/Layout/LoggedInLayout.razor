@inherits LayoutComponentBase
@using NEXT2.Data
@inject ApplicationDbContext DbContext
@inject NavigationManager Navigation


<PageTitle>Next2-BlazorServerApplication</PageTitle>

<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/7c57c7a426.js" crossorigin="anonymous"></script>
    <base href="~/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="site.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>

<body>
    <div class="page">
        <main>
            <div class="container-space-between padding-50">
                <img src="NextCareersLogo.png" style="height: 40px; width: 75px;" />
                <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                    <span aria-hidden="true"></span> <span style="color:black;"><i class="fas fa-right-from-bracket"></i></span>
                </NavLink>
            </div>
            <p style="color:green;">logged in</p>
            <article class="content px-4">
                @Body
            </article>
        </main>
    </div>
</body>

@code{
    //public string userid { get; set; } = "0";
    private string email;
    private List<User> users;

    protected override void OnInitialized()
    {
        try
        {
            users = DbContext.Users.ToList();
        }
        catch
        {

        }

        foreach (User user in users)
        {
            if (userid == Convert.ToString(user.userID))
            {
                email = user.Email;
            }
        }
    }

    [Parameter] public string userid{ get; set; }


}

</html>