@page "/"
@inject NavigationManager Navigator
@using NEXT2.Data
@inject ApplicationDbContext DbContext
@rendermode InteractiveServer

<PageTitle>Index</PageTitle>

<div class="centre-content container-centre margin-t-50">
    <h1>Next Career Quiz</h1>
    <p class="margin-t-50">Take 5-10 minutes to answer a set of questions specifically designed to help you understand which position is best suitable for you to apply to</p>
    <button @onclick="StartQuiz" class="white-button margin-t-50 no-link"> Start Quiz</button>
    <span class="margin-t-50" style=" padding-top:1px">
        Already completed the NEXT Careers Quiz?
        <a href="Login" class="margin-t-50 auth-a" style="font-weight:bold;">Log in</a>
         to view your results
    </span>
    <a href="FetchUsers" class="auth-a margin-t-50" style="font-weight:bold;">dbtest</a>
</div>



@code {
    private void StartQuiz()
    {
        List<UserAnswer> all_user_answers = DbContext.UserAnswersNew.ToList();

        int next_session_id = 0;

        if (all_user_answers.Count() != 0)
        {
            next_session_id = all_user_answers.Last().SessionID + 1;
        }

        Navigator.NavigateTo($"/Quiz/{1}/{next_session_id}");
    }

    
}
